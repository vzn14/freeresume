# Render Deployment Guide for Free Resume Builder

## Prerequisites
1. [Render Account](https://render.com) (free tier available)
2. GitHub repository with this codebase
3. Basic understanding of environment variables

## Deployment Steps

### 1. Deploy via Render Dashboard

#### Option A: Single Repository Deployment
1. **Connect Repository:**
   - Go to [Render Dashboard](https://dashboard.render.com)
   - Click "New +" → "Blueprint"
   - Connect your GitHub repository
   - Render will automatically detect the `render.yaml` file

2. **Review Configuration:**
   - Render will create 3 services:
     - `freeresumebuilder-db` (PostgreSQL Database)
     - `freeresumebuilder-backend` (Node.js API)
     - `freeresumebuilder-frontend` (Static Site)

3. **Deploy:**
   - Click "Apply" to start deployment
   - Wait for all services to deploy (5-10 minutes)

#### Option B: Manual Service Creation

##### 1. Create PostgreSQL Database
- Service Type: `PostgreSQL`
- Name: `freeresumebuilder-db`
- Plan: `Free`
- Database Name: `freeresumebuilder`
- User: `freeresumebuilder`

##### 2. Create Backend Service
- Service Type: `Web Service`
- Name: `freeresumebuilder-backend`
- Runtime: `Node.js`
- Build Command: 
  ```bash
  npm install -g pnpm && pnpm install && pnpm prisma:generate && pnpm build:server
  ```
- Start Command:
  ```bash
  pnpm prisma:migrate && pnpm start:server
  ```

##### 3. Create Frontend Service
- Service Type: `Static Site`
- Name: `freeresumebuilder-frontend`
- Build Command:
  ```bash
  npm install -g pnpm && pnpm install && pnpm build:client
  ```
- Publish Directory: `dist/apps/client`

### 2. Environment Variables Setup

#### Backend Service Environment Variables:
```
NODE_ENV=production
PORT=3000
PUBLIC_URL=https://freeresumebuilder.onrender.com
STORAGE_URL=https://freeresumebuilder-backend.onrender.com/storage
DATABASE_URL=[Auto-generated by Render]
ACCESS_TOKEN_SECRET=[Auto-generate 32-char random string]
REFRESH_TOKEN_SECRET=[Auto-generate 32-char random string]
MAIL_FROM=noreply@freeresumebuilder.co
STORAGE_ENDPOINT=localhost
STORAGE_PORT=9000
STORAGE_REGION=us-east-1
STORAGE_BUCKET=default
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin
STORAGE_USE_SSL=false
STORAGE_SKIP_BUCKET_CHECK=true
DISABLE_SIGNUPS=true
DISABLE_EMAIL_AUTH=true
CHROME_TOKEN=chrome_token
CHROME_URL=ws://localhost:3000
```

#### Frontend Service Environment Variables:
```
NODE_ENV=production
VITE_SERVER_URL=https://freeresumebuilder-backend.onrender.com
```

### 3. Post-Deployment Configuration

#### Update URLs:
1. After backend deploys, copy the backend URL
2. Update `PUBLIC_URL` in backend environment variables
3. Update `VITE_SERVER_URL` in frontend environment variables
4. Redeploy both services

#### Domain Configuration (Optional):
1. **Custom Domain Setup:**
   - Go to Settings → Custom Domains
   - Add `freeresumebuilder.co`
   - Update DNS records as instructed
   - Update environment variable URLs

### 4. Verification Steps

1. **Check Backend Health:**
   - Visit: `https://your-backend-url.onrender.com/api/health`
   - Should return JSON with service status

2. **Check Frontend:**
   - Visit: `https://your-frontend-url.onrender.com`
   - Should load the resume builder interface

3. **Test Functionality:**
   - Create a new resume
   - Test drag-and-drop features
   - Verify PDF generation works

### 5. Monitoring & Maintenance

#### Logs:
- Access logs via Render Dashboard → Service → Logs
- Monitor for errors and performance issues

#### Updates:
- Push to main branch automatically triggers redeployment
- Monitor build status in Render Dashboard

#### Database Management:
- Access PostgreSQL via Render Dashboard
- Use external tools like TablePlus or pgAdmin with connection details

### 6. Troubleshooting

#### Common Issues:

1. **Build Failures:**
   - Check Node.js version (should be 22.13.1)
   - Ensure pnpm is installed in build commands
   - Verify all dependencies are in package.json

2. **Database Connection:**
   - Ensure DATABASE_URL is properly set
   - Check if migrations ran successfully
   - Verify PostgreSQL service is running

3. **CORS Issues:**
   - Update PUBLIC_URL and VITE_SERVER_URL
   - Ensure frontend points to correct backend URL

4. **PDF Generation Issues:**
   - Chrome/Puppeteer might not work on free tier
   - Consider using alternative PDF generation service

### 7. Cost Optimization

#### Free Tier Limits:
- PostgreSQL: 1GB storage, 1 million rows
- Web Services: 750 hours/month
- Static Sites: 100GB bandwidth

#### Scaling Options:
- Upgrade to paid plans for better performance
- Use external services for storage (AWS S3)
- Implement CDN for better global performance

### 8. Security Considerations

1. **Environment Variables:**
   - Never commit secrets to repository
   - Use Render's environment variable management
   - Rotate secrets periodically

2. **Database Security:**
   - Database is automatically secured by Render
   - Use strong, unique passwords
   - Regular backups (automatic on paid plans)

3. **SSL/HTTPS:**
   - Automatically enabled by Render
   - Custom domains get free SSL certificates

## Support

- **Render Documentation:** https://render.com/docs
- **Project Issues:** Create GitHub issue
- **Community Support:** Join Discord/Reddit communities

## Notes

- This deployment configuration is optimized for the free tier
- Authentication is disabled as per project requirements
- Storage uses local filesystem (not persistent on restarts)
- For production use, consider upgrading to paid plans for better reliability